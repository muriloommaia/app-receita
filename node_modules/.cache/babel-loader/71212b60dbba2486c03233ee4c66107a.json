{"ast":null,"code":"import _toConsumableArray from\"/home/muriloomaia/Documents/gitHub/app-receita/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/muriloomaia/Documents/gitHub/app-receita/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/muriloomaia/Documents/gitHub/app-receita/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import{useSelector}from'react-redux';import shareIcon from\"../../images/shareIcon.svg\";import whiteHeartIcon from\"../../images/whiteHeartIcon.svg\";import blackHeartIcon from\"../../images/blackHeartIcon.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var setTags=function setTags(tags){var arrayTags=[];if(tags){if(tags.includes(',')){arrayTags=tags.replace(/\\s/g,'').split(',');}else{arrayTags.push(tags);}}return arrayTags;};export default function HeaderDetails(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),favorite=_React$useState2[0],setFavorite=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),clipboard=_React$useState4[0],setClipboard=_React$useState4[1];var _useSelector=useSelector(function(state){return state;}),detail=_useSelector.detail;var key=Object.keys(detail)[0];var recipe=detail[key][0];var path=window.location.pathname.split('/')[1];var ref=null;var localStorageObj=null;var actualRecipeObj=null;var pathname=window.location.pathname;if(path==='comidas'){ref={strTitle:'strMeal',strThumb:'strMealThumb',strCateg:'strCategory'};localStorageObj={id:recipe.idMeal,type:'comida',area:recipe.strArea,category:recipe.strCategory,alcoholicOrNot:'',name:recipe.strMeal,image:recipe.strMealThumb};actualRecipeObj=_objectSpread(_objectSpread({},localStorageObj),{},{tags:setTags(recipe.strTags)});}if(path==='bebidas'){ref={strTitle:'strDrink',strThumb:'strDrinkThumb',strCateg:'strAlcoholic'};localStorageObj={id:recipe.idDrink,type:'bebida',area:'',category:recipe.strCategory,alcoholicOrNot:recipe.strAlcoholic,name:recipe.strDrink,image:recipe.strDrinkThumb};actualRecipeObj=_objectSpread(_objectSpread({},localStorageObj),{},{tags:setTags(recipe.strTags)});}if(clipboard){setTimeout(function(){setClipboard(false);},1000);}useEffect(function(){var isFavorite=JSON.parse(localStorage.getItem('favoriteRecipes')).some(function(item){return item.id===recipe.idMeal||item.id===recipe.idDrink;});setFavorite(isFavorite);localStorage.setItem('actualRecipe',JSON.stringify(actualRecipeObj));},[recipe,actualRecipeObj]);var handleClickFavorite=function handleClickFavorite(){setFavorite(!favorite);if(!favorite){var favoriteRecipes=JSON.parse(localStorage.getItem('favoriteRecipes'));var allFavorites=[].concat(_toConsumableArray(favoriteRecipes),[localStorageObj]);localStorage.setItem('favoriteRecipes',JSON.stringify(allFavorites));}else{var _favoriteRecipes=JSON.parse(localStorage.getItem('favoriteRecipes'));var _allFavorites=_favoriteRecipes.filter(function(item){return item.id!==localStorageObj.id;});localStorage.setItem('favoriteRecipes',JSON.stringify(_allFavorites));}};return/*#__PURE__*/_jsxs(\"section\",{className:\"block md:flex md:items-center md:justify-between md:mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"img\",{src:recipe[ref.strThumb],alt:\"test\",\"data-testid\":\"recipe-photo\",className:\"w-full h-48 object-cover md:w-96 md:h-auto\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-2 h-full flex justify-between px-4 sm:items-center sm:pr-36\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h2\",{\"data-testid\":\"recipe-title\",className:\"text-2xl border-b border-gray-900 md:text-7xl font-sans md:font-serif\",children:recipe[ref.strTitle]}),/*#__PURE__*/_jsx(\"h3\",{\"data-testid\":\"recipe-category\",className:\"text-center text-gray-800 font-sans md:font-serif md:text-5xl\",children:recipe[ref.strCateg]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-transparent border-0 mr-3 p-2 w-14\",id:\"liveToastBtn\",\"data-testid\":\"share-btn\"// https://stackoverflow.com/questions/39501289/in-reactjs-how-to-copy-text-to-clipboard - copy to clipboard\n,onClick:function onClick(){var link=pathname.includes('progress')?pathname.replace('/in-progress',''):pathname;navigator.clipboard.writeText(\"http://localhost:3000\".concat(link));setClipboard(true);},children:/*#__PURE__*/_jsx(\"img\",{src:shareIcon,alt:\"share icon\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-transparent border-0 w-14\",\"data-testid\":\"favorite-btn\",onClick:handleClickFavorite,src:favorite?'blackHeartIcon':'whiteHeartIcon',children:/*#__PURE__*/_jsx(\"img\",{src:favorite?blackHeartIcon:whiteHeartIcon,alt:\"favorite icon\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(clipboard?'visible':'hidden',\" transform  duration-1000 transition-all opacity-90 ease-in-out\"),children:\"Link copiado!\"})]})]})]});}","map":{"version":3,"sources":["/home/muriloomaia/Documents/gitHub/app-receita/src/components/Details/HeaderDetails.jsx"],"names":["React","useEffect","useSelector","setTags","tags","arrayTags","includes","replace","split","push","HeaderDetails","useState","favorite","setFavorite","clipboard","setClipboard","state","detail","key","Object","keys","recipe","path","window","location","pathname","ref","localStorageObj","actualRecipeObj","strTitle","strThumb","strCateg","id","idMeal","type","area","strArea","category","strCategory","alcoholicOrNot","name","strMeal","image","strMealThumb","strTags","idDrink","strAlcoholic","strDrink","strDrinkThumb","setTimeout","isFavorite","JSON","parse","localStorage","getItem","some","item","setItem","stringify","handleClickFavorite","favoriteRecipes","allFavorites","filter","link","navigator","writeText","shareIcon","blackHeartIcon","whiteHeartIcon"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport shareIcon from '../../images/shareIcon.svg';\nimport whiteHeartIcon from '../../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../../images/blackHeartIcon.svg';\n\nconst setTags = (tags) => {\n  let arrayTags = [];\n  if (tags) {\n    if (tags.includes(',')) {\n      arrayTags = tags.replace(/\\s/g, '').split(',');\n    } else {\n      arrayTags.push(tags);\n    }\n  }\n  return arrayTags;\n};\n\nexport default function HeaderDetails() {\n  const [favorite, setFavorite] = React.useState(false);\n  const [clipboard, setClipboard] = React.useState(false);\n  const { detail } = useSelector((state) => state);\n  const key = Object.keys(detail)[0];\n  const recipe = detail[key][0];\n  const path = window.location.pathname.split('/')[1];\n  let ref = null;\n  let localStorageObj = null;\n  let actualRecipeObj = null;\n  const { pathname } = window.location;\n  if (path === 'comidas') {\n    ref = { strTitle: 'strMeal', strThumb: 'strMealThumb', strCateg: 'strCategory' };\n\n    localStorageObj = { id: recipe.idMeal,\n      type: 'comida',\n      area: recipe.strArea,\n      category: recipe.strCategory,\n      alcoholicOrNot: '',\n      name: recipe.strMeal,\n      image: recipe.strMealThumb };\n    actualRecipeObj = { ...localStorageObj, tags: setTags(recipe.strTags) };\n  }\n  if (path === 'bebidas') {\n    ref = { strTitle: 'strDrink', strThumb: 'strDrinkThumb', strCateg: 'strAlcoholic' };\n    localStorageObj = { id: recipe.idDrink,\n      type: 'bebida',\n      area: '',\n      category: recipe.strCategory,\n      alcoholicOrNot: recipe.strAlcoholic,\n      name: recipe.strDrink,\n      image: recipe.strDrinkThumb };\n\n    actualRecipeObj = { ...localStorageObj, tags: setTags(recipe.strTags) };\n  }\n  if(clipboard) {\n    setTimeout(() => {\n      setClipboard(false);\n    }, 1000);\n  }\n  useEffect(() => {\n    const isFavorite = JSON.parse(localStorage.getItem('favoriteRecipes'))\n      .some((item) => item.id === recipe.idMeal || item.id === recipe.idDrink);\n    setFavorite(isFavorite);\n    localStorage.setItem('actualRecipe', JSON.stringify(actualRecipeObj));\n  }, [recipe, actualRecipeObj]);\n  const handleClickFavorite = () => {\n    setFavorite(!favorite);\n    if (!favorite) {\n      const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n      const allFavorites = [...favoriteRecipes, localStorageObj];\n      localStorage.setItem('favoriteRecipes', JSON.stringify(allFavorites));\n    } else {\n      const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n      const allFavorites = favoriteRecipes.filter(\n        (item) => item.id !== localStorageObj.id,\n      );\n      localStorage.setItem('favoriteRecipes', JSON.stringify(allFavorites));\n    }\n  };\n  return (\n    <section className=\"block md:flex md:items-center md:justify-between md:mb-4\">\n      <div className=\"\">\n        <img\n          src={ recipe[ref.strThumb] }\n          alt=\"test\"\n          data-testid=\"recipe-photo\"\n          className=\"w-full h-48 object-cover md:w-96 md:h-auto\"\n        />\n      </div>\n      <div className=\"my-2 h-full flex justify-between px-4 sm:items-center sm:pr-36\">\n        <div className=\"\">\n          <h2 data-testid=\"recipe-title\" className=\"text-2xl border-b border-gray-900 md:text-7xl font-sans md:font-serif\">{ recipe[ref.strTitle] }</h2>\n          <h3 data-testid=\"recipe-category\" className=\"text-center text-gray-800 font-sans md:font-serif md:text-5xl\">{ recipe[ref.strCateg] }</h3>\n        </div>\n        <div>\n        <div className=\"flex items-center\">\n          <button\n            type=\"button\"\n            className=\"bg-transparent border-0 mr-3 p-2 w-14\"\n            id=\"liveToastBtn\"\n            data-testid=\"share-btn\"\n            // https://stackoverflow.com/questions/39501289/in-reactjs-how-to-copy-text-to-clipboard - copy to clipboard\n            onClick={ () => {\n              const link = pathname.includes('progress')\n                ? pathname.replace('/in-progress', '')\n                : pathname;\n              navigator.clipboard.writeText(`http://localhost:3000${link}`);\n              setClipboard(true);\n            } }\n          >\n            <img\n              src={ shareIcon }\n              alt=\"share icon\"\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"bg-transparent border-0 w-14\"\n            data-testid=\"favorite-btn\"\n            onClick={ handleClickFavorite }\n            src={ favorite ? 'blackHeartIcon' : 'whiteHeartIcon' }\n          >\n            <img\n              src={ favorite ? blackHeartIcon : whiteHeartIcon }\n              alt=\"favorite icon\"\n            />\n          </button>\n        </div>\n          <p className={`${clipboard ? 'visible' : 'hidden'} transform  duration-1000 transition-all opacity-90 ease-in-out`}>Link copiado!</p>\n          </div>\n      </div>\n    </section>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}