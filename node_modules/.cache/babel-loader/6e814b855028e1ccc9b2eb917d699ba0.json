{"ast":null,"code":"import _regeneratorRuntime from\"/home/muriloomaia/Documents/gitHub/app-receita/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/muriloomaia/Documents/gitHub/app-receita/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/muriloomaia/Documents/gitHub/app-receita/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import{useSelector}from'react-redux';import fetchApi from'../../services/fetchApi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Recomendations(){var _useSelector=useSelector(function(state){return state;}),detail=_useSelector.detail;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isFetching=_React$useState2[0],setIsFetching=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),recomendations=_React$useState4[0],setRecomendations=_React$useState4[1];var key=Object.keys(detail)[0];var recipe=detail[key][0];var strYoutube=recipe.strYoutube;var idYoutube=strYoutube?strYoutube.split('v=')[1]:null;var path=window.location.pathname.split('/')[1];var strTitle=null;var strThumb=null;if(path==='comidas'){strTitle='strDrink';strThumb='strDrinkThumb';path='/bebidas';key='drinks';}if(path==='bebidas'){strTitle='strMeal';strThumb='strMealThumb';path='/comidas';key='meals';}useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchApi({inputRadio:'name',search:''},path);case 2:response=_context.sent;setRecomendations(response[key]);setIsFetching(true);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[key,path]);if(!isFetching)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"pb-7\",children:[strYoutube&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-7 flex flex-col\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-2xl px-4\",children:\"V\\xEDdeo\"}),/*#__PURE__*/_jsx(\"iframe\",{src:\"https://www.youtube.com/embed/\".concat(idYoutube),title:\"video\",frameBorder:\"0\",allowFullScreen:true,\"data-testid\":\"video\",className:\"justify-self-center md:w-3/4 md:h-96 md:self-center\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-2xl mb-3\",children:\"Recomendations\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex w-full overflow-x-scroll border p-3 px-4 \",children:recomendations.map(function(item,index){var MAX_CARDS=5;if(index>MAX_CARDS)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 sm:w-96 md:w-72 mr-3 shadow-2xl rounded-3xl border-primary border\",\"data-testid\":\"\".concat(index,\"-recomendation-card\"),children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-72 max-w-none rounded-t-3xl\",src:item[strThumb],alt:item[strTitle]}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"\".concat(index,\"-recomendation-title\"),className:\"text-xl text-center py-2\",children:item[strTitle]})]},index);})})]})]});}","map":{"version":3,"sources":["/home/muriloomaia/Documents/gitHub/app-receita/src/components/Details/Recomendations.jsx"],"names":["React","useEffect","useSelector","fetchApi","Recomendations","state","detail","useState","isFetching","setIsFetching","recomendations","setRecomendations","key","Object","keys","recipe","strYoutube","idYoutube","split","path","window","location","pathname","strTitle","strThumb","fetchData","inputRadio","search","response","map","item","index","MAX_CARDS"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport fetchApi from '../../services/fetchApi';\n\nexport default function Recomendations() {\n  const { detail } = useSelector((state) => state);\n  const [isFetching, setIsFetching] = React.useState(false);\n  const [recomendations, setRecomendations] = React.useState([]);\n  let key = Object.keys(detail)[0];\n  const recipe = detail[key][0];\n  const { strYoutube } = recipe;\n  const idYoutube = strYoutube ? strYoutube.split('v=')[1] : null;\n  let path = window.location.pathname.split('/')[1];\n  let strTitle = null;\n  let strThumb = null;\n  if (path === 'comidas') {\n    strTitle = 'strDrink';\n    strThumb = 'strDrinkThumb';\n    path = '/bebidas';\n    key = 'drinks';\n  }\n  if (path === 'bebidas') {\n    strTitle = 'strMeal';\n    strThumb = 'strMealThumb';\n    path = '/comidas';\n    key = 'meals';\n  }\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await fetchApi({\n        inputRadio: 'name',\n        search: '',\n      }, path);\n      setRecomendations(response[key]);\n      setIsFetching(true);\n    };\n    fetchData();\n  }, [key, path]);\n  if (!isFetching) return <div>Loading...</div>;\n  return (\n    <div className=\"pb-7\">\n      { strYoutube && (\n        <div className=\"mb-7 flex flex-col\">\n          <h1 className=\"font-bold text-2xl px-4\">VÃ­deo</h1>\n          <iframe\n            src={ `https://www.youtube.com/embed/${idYoutube}` }\n            title=\"video\"\n            frameBorder=\"0\"\n            allowFullScreen\n            data-testid=\"video\"\n            className=\"justify-self-center md:w-3/4 md:h-96 md:self-center\"\n          />\n        </div>\n      )}\n      <div className=\"w-full p-4\">\n      <p className=\"font-bold text-2xl mb-3\">Recomendations</p>\n      <div className=\"flex w-full overflow-x-scroll border p-3 px-4 \">\n        { recomendations.map((item, index) => {\n          const MAX_CARDS = 5;\n          if (index > MAX_CARDS) return null;\n          return (\n            <div\n              key={ index }\n              className=\"w-80 sm:w-96 md:w-72 mr-3 shadow-2xl rounded-3xl border-primary border\"\n              data-testid={ `${index}-recomendation-card` }\n            >\n              <img  className=\"w-72 max-w-none rounded-t-3xl\" src={ item[strThumb] } alt={ item[strTitle] } />\n              <p data-testid={ `${index}-recomendation-title` }\n              className=\"text-xl text-center py-2\"\n              >{item[strTitle]}</p>\n            </div>\n          );\n        })}\n      </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}