{"ast":null,"code":"import _toConsumableArray from\"/home/muriloomaia/Documents/gitHub/app-receita/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/muriloomaia/Documents/gitHub/app-receita/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/muriloomaia/Documents/gitHub/app-receita/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{changeCheck}from'../../store/checkSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function InstructionsInProgress(){var _useSelector=useSelector(function(state){return state;}),detail=_useSelector.detail;var dispatch=useDispatch();var key=Object.keys(detail)[0];var pathname=window.location.pathname;var recipe=detail[key][0];var strInstructions=recipe.strInstructions;var ingredients=[];var measures=[];function addIngredientsAndMeasures(){var stop=true;for(var i=1;stop;i+=1){if(recipe[\"strIngredient\".concat(i)]===''||!recipe[\"strIngredient\".concat(i)]){stop=false;}else{ingredients.push(recipe[\"strIngredient\".concat(i)]);measures.push(recipe[\"strMeasure\".concat(i)]);}}}addIngredientsAndMeasures();var saveLocalStorage=function saveLocalStorage(){var localStorageObj=JSON.parse(localStorage.getItem('inProgressRecipes'));var keyName=pathname.includes('comidas')?'meals':'cocktails';var labels=document.querySelector('.instructions');localStorageObj[keyName]=_objectSpread(_objectSpread({},localStorageObj[keyName]),{},_defineProperty({},pathname.split('/')[2],labels.innerHTML));localStorage.setItem('inProgressRecipes',JSON.stringify(localStorageObj));};var handleChangeProgress=function handleChangeProgress(_ref){var target=_ref.target;target.parentNode.classList.toggle('done');var labels=document.querySelectorAll('label');var allChecks=_toConsumableArray(labels).every(function(label){return label.firstElementChild.checked;});dispatch(changeCheck(allChecks));saveLocalStorage();};console.log('se apareceu deu ruim');useEffect(function(){var inProgressRecipes=JSON.parse(localStorage.getItem('inProgressRecipes'));var keyName=pathname.includes('comidas')?'meals':'cocktails';var ingredientsSaved=inProgressRecipes[keyName][pathname.split('/')[2]];if(ingredientsSaved){var parent=document.querySelector('.instructions');parent.innerHTML=ingredientsSaved;var labels=document.querySelectorAll('label');labels.forEach(function(label){if(label.classList.contains('done')){label.firstElementChild.setAttribute('checked',true);}label.firstChild.addEventListener('click',function(e){return handleChangeProgress(e);});});}saveLocalStorage();},[]);return/*#__PURE__*/_jsxs(\"section\",{className:\"px-4  pt-4 rounded-3xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\" w-14 border-t-4 border-gray-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-ingredients mt-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-lg mb-2\",children:\" Ingredients \"}),ingredients.map(function(ingredient,index){return/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:index,className:\"ingredient ingredients text-lg md:text-xl subpixel-antialiased text-gray-800 cursor-pointer\",\"data-testid\":\"\".concat(index,\"-ingredient-step\"),onChange:handleChangeProgress,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:index,className:\"mr-2\"}),\"\".concat(ingredient,\" - \").concat(measures[index])]})},index);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-2 mt-5 pb-12\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold mb-2 text-lg\",children:\" Instructions \"}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"instructions \",className:\"text-justify text-gray-700 md:text-xl\",children:strInstructions})]})]});}","map":{"version":3,"sources":["/home/muriloomaia/Documents/gitHub/app-receita/src/components/Details/InstructionsInProgress.jsx"],"names":["React","useEffect","useDispatch","useSelector","changeCheck","InstructionsInProgress","state","detail","dispatch","key","Object","keys","pathname","window","location","recipe","strInstructions","ingredients","measures","addIngredientsAndMeasures","stop","i","push","saveLocalStorage","localStorageObj","JSON","parse","localStorage","getItem","keyName","includes","labels","document","querySelector","split","innerHTML","setItem","stringify","handleChangeProgress","target","parentNode","classList","toggle","querySelectorAll","allChecks","every","label","firstElementChild","checked","console","log","inProgressRecipes","ingredientsSaved","parent","forEach","contains","setAttribute","firstChild","addEventListener","e","map","ingredient","index"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeCheck } from '../../store/checkSlice';\n\nexport default function InstructionsInProgress() {\n  const { detail } = useSelector((state) => state);\n  const dispatch = useDispatch();\n  const key = Object.keys(detail)[0];\n  const { pathname } = window.location;\n  const recipe = detail[key][0];\n  const { strInstructions } = recipe;\n  const ingredients = [];\n  const measures = [];\n  function addIngredientsAndMeasures() {\n    let stop = true;\n    for (let i = 1; stop; i += 1) {\n      if (recipe[`strIngredient${i}`] === '' || !recipe[`strIngredient${i}`]) {\n        stop = false;\n      } else {\n        ingredients.push(recipe[`strIngredient${i}`]);\n        measures.push(recipe[`strMeasure${i}`]);\n      }\n    }\n  }\n  addIngredientsAndMeasures();\n\n  const saveLocalStorage = () => {\n    const localStorageObj = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const keyName = pathname.includes('comidas') ? 'meals' : 'cocktails';\n    const labels = document.querySelector('.instructions');\n    localStorageObj[keyName] = {\n      ...localStorageObj[keyName],\n      [pathname.split('/')[2]]: labels.innerHTML,\n    };\n    localStorage.setItem('inProgressRecipes', JSON.stringify(localStorageObj));\n  };\n  const handleChangeProgress = ({ target }) => {\n    target.parentNode.classList.toggle('done');\n\n    const labels = document.querySelectorAll('label');\n    const allChecks = [...labels].every((label) => label.firstElementChild.checked);\n    dispatch(changeCheck(allChecks));\n    saveLocalStorage();\n  };\n  console.log('se apareceu deu ruim')\n\n  useEffect(() => {\n    const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const keyName = pathname.includes('comidas') ? 'meals' : 'cocktails';\n    const ingredientsSaved = inProgressRecipes[keyName][pathname.split('/')[2]];\n    if (ingredientsSaved) {\n      const parent = document.querySelector('.instructions');\n      parent.innerHTML = ingredientsSaved;\n      const labels = document.querySelectorAll('label');\n      labels.forEach((label) => {\n        if (label.classList.contains('done')) {\n          label.firstElementChild.setAttribute('checked', true);\n        }\n        label.firstChild.addEventListener('click', (e) => handleChangeProgress(e));\n      });\n    }\n    saveLocalStorage();\n  }, []);\n  return (\n    <section className=\"px-4  pt-4 rounded-3xl\">\n      <div className=\"w-full flex justify-center\">\n        <div className=\" w-14 border-t-4 border-gray-500\" />\n      </div>\n      <div className=\"all-ingredients mt-8\">\n        <p className=\"font-bold text-lg mb-2\"> Ingredients </p>\n        {ingredients.map((ingredient, index) => (\n          <div key={index} className=\"\">\n            <label\n              htmlFor={index}\n              className=\"ingredient ingredients text-lg md:text-xl subpixel-antialiased text-gray-800 cursor-pointer\"\n              data-testid={`${index}-ingredient-step`}\n              onChange={handleChangeProgress}\n            >\n              <input type=\"checkbox\" id={index} className=\"mr-2\" />\n              {`${ingredient} - ${measures[index]}`}\n            </label>\n          </div>\n        ))}\n      </div>\n      <div className=\"my-2 mt-5 pb-12\">\n        <p className=\"font-bold mb-2 text-lg\"> Instructions </p>\n        <p data-testid=\"instructions \"\n          className=\"text-justify text-gray-700 md:text-xl\"\n        >{strInstructions}</p>\n      </div>\n    </section>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}