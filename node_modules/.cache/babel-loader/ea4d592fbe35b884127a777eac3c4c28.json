{"ast":null,"code":"var _jsxFileName = \"/home/muriloomaia/Documents/gitHub/app-receita/src/components/Details/InstructionsInProgress.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeCheck } from '../../store/checkSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function InstructionsInProgress() {\n  _s();\n\n  const {\n    detail\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  const key = Object.keys(detail)[0];\n  const {\n    pathname\n  } = window.location;\n  const recipe = detail[key][0];\n  const {\n    strInstructions\n  } = recipe;\n  const ingredients = [];\n  const measures = [];\n\n  function addIngredientsAndMeasures() {\n    let stop = true;\n\n    for (let i = 1; stop; i += 1) {\n      if (recipe[`strIngredient${i}`] === '' || !recipe[`strIngredient${i}`]) {\n        stop = false;\n      } else {\n        ingredients.push(recipe[`strIngredient${i}`]);\n        measures.push(recipe[`strMeasure${i}`]);\n      }\n    }\n  }\n\n  addIngredientsAndMeasures();\n\n  const saveLocalStorage = () => {\n    const localStorageObj = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const keyName = pathname.includes('comidas') ? 'meals' : 'cocktails';\n    const labels = document.querySelector('.instructions');\n    localStorageObj[keyName] = { ...localStorageObj[keyName],\n      [pathname.split('/')[2]]: labels.innerHTML\n    };\n    localStorage.setItem('inProgressRecipes', JSON.stringify(localStorageObj));\n  };\n\n  const handleChangeProgress = _ref => {\n    let {\n      target\n    } = _ref;\n    target.parentNode.classList.toggle('done');\n    const labels = document.querySelectorAll('label');\n    const allChecks = [...labels].every(label => label.firstElementChild.checked);\n    dispatch(changeCheck(allChecks));\n    saveLocalStorage();\n  };\n\n  useEffect(() => {\n    const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const keyName = pathname.includes('comidas') ? 'meals' : 'cocktails';\n    const ingredientsSaved = inProgressRecipes[keyName][pathname.split('/')[2]];\n\n    if (ingredientsSaved) {\n      const parent = document.querySelector('.instructions');\n      parent.innerHTML = ingredientsSaved;\n      const labels = document.querySelectorAll('label');\n      labels.forEach(label => {\n        if (label.classList.contains('done')) {\n          label.firstElementChild.setAttribute('checked', true);\n        }\n\n        label.firstChild.addEventListener('click', e => handleChangeProgress(e));\n      });\n    }\n\n    saveLocalStorage();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"px-4  pt-4 rounded-3xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" w-14 border-t-4 border-gray-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"all-ingredients mt-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-bold text-lg mb-2\",\n        children: \" Ingredients \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }, this), ingredients.map((ingredient, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: index,\n          className: \"ingredient\",\n          \"data-testid\": `${index}-ingredient-step`,\n          onChange: handleChangeProgress,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: index\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), `${ingredient} - ${measures[index]}`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": \"instructions\",\n        children: strInstructions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(InstructionsInProgress, \"QJ7Z331sgA09yzJ7U3EEQY5Cg8E=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = InstructionsInProgress;\n\nvar _c;\n\n$RefreshReg$(_c, \"InstructionsInProgress\");","map":{"version":3,"sources":["/home/muriloomaia/Documents/gitHub/app-receita/src/components/Details/InstructionsInProgress.jsx"],"names":["React","useEffect","useDispatch","useSelector","changeCheck","InstructionsInProgress","detail","state","dispatch","key","Object","keys","pathname","window","location","recipe","strInstructions","ingredients","measures","addIngredientsAndMeasures","stop","i","push","saveLocalStorage","localStorageObj","JSON","parse","localStorage","getItem","keyName","includes","labels","document","querySelector","split","innerHTML","setItem","stringify","handleChangeProgress","target","parentNode","classList","toggle","querySelectorAll","allChecks","every","label","firstElementChild","checked","inProgressRecipes","ingredientsSaved","parent","forEach","contains","setAttribute","firstChild","addEventListener","e","map","ingredient","index"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeCheck } from '../../store/checkSlice';\n\nexport default function InstructionsInProgress() {\n  const { detail } = useSelector((state) => state);\n  const dispatch = useDispatch();\n  const key = Object.keys(detail)[0];\n  const { pathname } = window.location;\n  const recipe = detail[key][0];\n  const { strInstructions } = recipe;\n  const ingredients = [];\n  const measures = [];\n  function addIngredientsAndMeasures() {\n    let stop = true;\n    for (let i = 1; stop; i += 1) {\n      if (recipe[`strIngredient${i}`] === '' || !recipe[`strIngredient${i}`]) {\n        stop = false;\n      } else {\n        ingredients.push(recipe[`strIngredient${i}`]);\n        measures.push(recipe[`strMeasure${i}`]);\n      }\n    }\n  }\n  addIngredientsAndMeasures();\n\n  const saveLocalStorage = () => {\n    const localStorageObj = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const keyName = pathname.includes('comidas') ? 'meals' : 'cocktails';\n    const labels = document.querySelector('.instructions');\n    localStorageObj[keyName] = {\n      ...localStorageObj[keyName],\n      [pathname.split('/')[2]]: labels.innerHTML,\n    };\n    localStorage.setItem('inProgressRecipes', JSON.stringify(localStorageObj));\n  };\n  const handleChangeProgress = ({ target }) => {\n    target.parentNode.classList.toggle('done');\n\n    const labels = document.querySelectorAll('label');\n    const allChecks = [...labels].every((label) => label.firstElementChild.checked);\n    dispatch(changeCheck(allChecks));\n    saveLocalStorage();\n  };\n\n  useEffect(() => {\n    const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const keyName = pathname.includes('comidas') ? 'meals' : 'cocktails';\n    const ingredientsSaved = inProgressRecipes[keyName][pathname.split('/')[2]];\n    if (ingredientsSaved) {\n      const parent = document.querySelector('.instructions');\n      parent.innerHTML = ingredientsSaved;\n      const labels = document.querySelectorAll('label');\n      labels.forEach((label) => {\n        if (label.classList.contains('done')) {\n          label.firstElementChild.setAttribute('checked', true);\n        }\n        label.firstChild.addEventListener('click', (e) => handleChangeProgress(e));\n      });\n    }\n    saveLocalStorage();\n  }, []);\n  return (\n    <section className=\"px-4  pt-4 rounded-3xl\">\n    <div className=\"w-full flex justify-center\">\n        <div className=\" w-14 border-t-4 border-gray-500\" />\n      </div>\n      <div className=\"all-ingredients mt-8\">\n      <p className=\"font-bold text-lg mb-2\"> Ingredients </p>\n        { ingredients.map((ingredient, index) => (\n          <div key={ index } className=\"\">\n            <label\n              htmlFor={ index }\n              className=\"ingredient\"\n              data-testid={ `${index}-ingredient-step` }\n              onChange={ handleChangeProgress }\n            >\n              <input type=\"checkbox\" id={ index } />\n              {`${ingredient} - ${measures[index]}`}\n            </label>\n          </div>\n        ))}\n      </div>\n      <div>\n        <p data-testid=\"instructions\">{ strInstructions }</p>\n      </div>\n    </section>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}